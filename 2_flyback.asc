Version 4
SHEET 1 2724 1364
WIRE 256 -1360 240 -1360
WIRE 384 -1360 336 -1360
WIRE -416 -1312 -448 -1312
WIRE -240 -1312 -336 -1312
WIRE -448 -1296 -448 -1312
WIRE -304 -1184 -368 -1184
WIRE 640 -1168 624 -1168
WIRE 768 -1168 720 -1168
WIRE -304 -1136 -304 -1184
WIRE -304 -1040 -304 -1056
WIRE -192 -352 -592 -352
WIRE 272 -352 -96 -352
WIRE 416 -352 272 -352
WIRE 752 -352 704 -352
WIRE 816 -352 752 -352
WIRE 960 -352 880 -352
WIRE 1136 -352 1024 -352
WIRE 1232 -352 1232 -368
WIRE 1232 -352 1136 -352
WIRE 752 -336 752 -352
WIRE 272 -320 272 -352
WIRE 416 -320 416 -352
WIRE 704 -320 704 -352
WIRE 1232 -320 1232 -352
WIRE 1136 -304 1136 -352
WIRE -176 -272 -176 -304
WIRE -176 -272 -528 -272
WIRE 1136 -224 1136 -240
WIRE 1232 -224 1232 -240
WIRE -368 -208 -416 -208
WIRE -176 -208 -176 -272
WIRE -176 -208 -288 -208
WIRE 272 -208 272 -240
WIRE 416 -208 416 -256
WIRE 416 -208 272 -208
WIRE 704 -208 704 -240
WIRE -176 -176 -176 -208
WIRE 272 -144 272 -208
WIRE -176 -64 -176 -80
WIRE 272 -48 272 -144
WIRE 224 32 144 32
WIRE 272 64 272 48
WIRE 2224 624 1968 624
WIRE 2288 624 2224 624
WIRE 2560 624 2288 624
WIRE 2224 960 2224 624
WIRE 2096 1072 1808 1072
WIRE 2224 1072 2224 1040
WIRE 2224 1072 2096 1072
WIRE 1536 1088 1488 1088
WIRE 1632 1088 1616 1088
WIRE 1744 1088 1632 1088
WIRE 1904 1104 1808 1104
WIRE 2224 1104 2224 1072
WIRE 1632 1120 1632 1088
WIRE 1632 1216 1632 1200
WIRE 2224 1216 2224 1184
FLAG 240 -1360 0
FLAG 384 -1360 P20V
FLAG -448 -1296 0
FLAG -240 -1312 g
FLAG 144 32 g
FLAG -592 -352 P20V
IOPIN -592 -352 In
FLAG 272 64 0
FLAG -304 -1040 0
FLAG -368 -1184 2v5_ref
FLAG 272 -144 Vd
FLAG 704 -208 0
FLAG 1136 -224 0
FLAG 1232 -224 0
FLAG 752 -272 0
FLAG 2224 1216 0
FLAG 1776 1056 P7V
FLAG 1776 1120 0
FLAG -128 -96 block
FLAG 1488 1088 block
FLAG 1632 1216 0
FLAG 1904 1104 2v5_ref
FLAG 2096 1072 Vfb
FLAG 624 -1168 0
FLAG 768 -1168 P7V
FLAG -416 -208 P20V
IOPIN -416 -208 In
FLAG -176 -64 0
FLAG 1232 -368 P400V
FLAG 2288 624 P400V
SYMBOL voltage 352 -1360 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -4 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 20
SYMBOL voltage -320 -1312 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 7 0 1n 1n {dut/fsw} {1/fsw})
SYMBOL ind2 256 -336 R0
SYMATTR InstName L1
SYMATTR Value 2.2µ
SYMATTR Type ind
SYMBOL nmos 224 -48 R0
SYMATTR InstName M1
SYMATTR Value IPB107N20N3
SYMBOL voltage -304 -1152 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 2.5
SYMBOL ind2 720 -224 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 880µ
SYMATTR Type ind
SYMBOL diode 816 -336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value RFN5TF8S
SYMBOL cap 1120 -304 R0
SYMATTR InstName C1
SYMATTR Value 220n
SYMBOL res 1216 -336 R0
SYMATTR InstName R1
SYMATTR Value 220K
SYMBOL cap 400 -320 R0
SYMATTR InstName C2
SYMATTR Value 4.7n
SYMBOL res 2208 1088 R0
SYMATTR InstName R2
SYMATTR Value 1K
SYMBOL res 2208 944 R0
SYMATTR InstName R3
SYMATTR Value 159K
SYMBOL OpAmps\\AD822 1776 1024 M0
SYMATTR InstName U1
SYMBOL pmos -96 -304 M270
SYMATTR InstName M3
SYMATTR Value IRF7406
SYMBOL res 1632 1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 220
SYMBOL res 1616 1104 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL voltage 736 -1168 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -4 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 7
SYMBOL nmos -128 -176 M0
SYMATTR InstName M2
SYMATTR Value IPB107N20N3
SYMBOL res -272 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1K
SYMBOL diode 960 -336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value RFN5TF8S
TEXT 96 -688 Left 2 ;boost section
TEXT 240 -1280 Left 2 !.param dut 0.35
TEXT 240 -1248 Left 2 !.param fsw 500K
TEXT 216 -1200 Left 2 !.tran 10m
TEXT 592 -1408 Left 2 ;nom duty for this would be 0.65\nhowever, this only applies to certain loads.\npicking 0.5
TEXT 184 -64 Left 0 ;DC-DC switch
TEXT -112 -872 Left 2 ;(winding ratio)^2 == inductance ratio\ne.g. 1:20 ratio is 1:400 inductance
TEXT 616 -616 Left 2 !K1 L1 L2 1
TEXT 656 384 Left 2 ;boost section
TEXT -936 744 Left 2 ;if >20V on output, cut the source
TEXT 2360 1032 Left 2 ;scales 20V to 2.5V\n(1:8)
TEXT 1384 1256 Left 2 ;high when > 2.5V (disable boosting)\nlow when < 2.5V (allow boost)
TEXT 1696 904 Left 2 ;bang-bang feedback
TEXT 288 -392 Left 2 ;ZVS tank
LINE Normal -720 784 1360 1056 2
RECTANGLE Normal 2720 1360 1248 928 1
