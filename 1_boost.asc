Version 4
SHEET 1 2404 1604
WIRE -96 -48 -112 -48
WIRE 32 -48 -16 -48
WIRE -768 0 -800 0
WIRE -592 0 -688 0
WIRE -800 16 -800 0
WIRE -656 128 -720 128
WIRE -656 176 -656 128
WIRE -656 272 -656 256
WIRE -304 752 -352 752
WIRE -192 752 -224 752
WIRE -1616 864 -1888 864
WIRE -944 864 -1520 864
WIRE -672 864 -944 864
WIRE -352 864 -352 752
WIRE -352 864 -672 864
WIRE -304 864 -352 864
WIRE -192 864 -192 752
WIRE -192 864 -224 864
WIRE -112 864 -192 864
WIRE 32 864 -112 864
WIRE 176 864 96 864
WIRE 1056 864 176 864
WIRE 1312 864 1056 864
WIRE 1648 864 1312 864
WIRE -944 896 -944 864
WIRE 1056 896 1056 864
WIRE 176 928 176 864
WIRE -1600 944 -1600 912
WIRE -1600 944 -1712 944
WIRE -112 960 -112 864
WIRE -944 992 -944 960
WIRE 1056 992 1056 976
WIRE 176 1008 176 992
WIRE -160 1040 -240 1040
WIRE -112 1072 -112 1056
WIRE 1312 1200 1312 864
WIRE 944 1280 896 1280
WIRE 624 1296 576 1296
WIRE 720 1296 704 1296
WIRE 832 1296 720 1296
WIRE 1184 1312 896 1312
WIRE 1312 1312 1312 1280
WIRE 1312 1312 1184 1312
WIRE 720 1328 720 1296
WIRE 1312 1344 1312 1312
WIRE 720 1424 720 1408
WIRE 1312 1456 1312 1424
FLAG -112 -48 0
FLAG 32 -48 P7V
FLAG -800 16 0
FLAG -592 0 g
FLAG -240 1040 g
FLAG -1888 864 P7V
IOPIN -1888 864 In
FLAG -112 1072 0
FLAG 176 1008 0
FLAG 1312 1456 0
FLAG 1056 992 0
FLAG 864 1264 P7V
FLAG 864 1328 0
FLAG -656 272 0
FLAG -1712 944 block
FLAG 576 1296 block
FLAG 720 1424 0
FLAG -720 128 2v5_ref
FLAG 944 1280 2v5_ref
FLAG -944 992 0
FLAG 1648 864 P20V
IOPIN 1648 864 Out
FLAG -112 864 Vd
FLAG -672 864 Vin_avail
FLAG 1184 1312 Vfb
SYMBOL voltage 0 -48 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 -4 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 7
SYMBOL voltage -672 0 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 7 0 100n 100n {dut/fsw} {1/fsw})
SYMBOL ind -320 880 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 22µ
SYMBOL schottky 32 880 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MBRS360
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 160 928 R0
SYMATTR InstName C1
SYMATTR Value 6.8µ
SYMBOL res 1296 1328 R0
SYMATTR InstName R1
SYMATTR Value 12.5k
SYMBOL nmos -160 960 R0
SYMATTR InstName M1
SYMATTR Value IRFZ44N
SYMBOL res 1296 1184 R0
SYMATTR InstName R2
SYMATTR Value 87.5k
SYMBOL res 1040 880 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL OpAmps\\AD822 864 1232 M0
SYMATTR InstName U1
SYMBOL voltage -656 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 2.5
SYMBOL pmos -1520 912 M270
SYMATTR InstName M2
SYMATTR Value IRF7406
SYMBOL res 720 1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 220
SYMBOL res 704 1312 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -208 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 470
SYMBOL schottky -928 960 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MBRS360
SYMATTR Description Diode
SYMATTR Type diode
TEXT -256 624 Left 2 ;boost section
TEXT -112 32 Left 2 !.param dut 0.5
TEXT -112 64 Left 2 !.param fsw 200k
TEXT -136 112 Left 2 !.tran 10m
TEXT 1024 832 Left 0 ;discharge/dummy load\nto limit unloaded behavior
TEXT 240 -96 Left 2 ;nom duty for this would be 0.65\nhowever, this only applies to certain loads.\npicking 0.5
TEXT -1848 984 Left 2 ;if >20V on output, cut the source
TEXT 1448 1272 Left 2 ;scales 20V to 2.5V\n(1:8)
TEXT 472 1496 Left 2 ;high when > 2.5V (disable boosting)\nlow when < 2.5V (allow boost)
TEXT -312 672 Left 0 ;par resistor helps\nsnub out HF ringing\nwhen boost disabled
TEXT -1008 840 Left 0 ;quells spike <0V when cut
TEXT 136 832 Left 0 ;bulk output cap
TEXT 48 808 Left 0 ;rectify
TEXT -200 944 Left 0 ;DC-DC switch
TEXT 784 1144 Left 2 ;bang-bang feedback
LINE Normal -1632 1024 448 1296 2
RECTANGLE Normal 1808 1600 336 1168 1
RECTANGLE Normal 304 1120 -448 656 1
